<%- include('partials/header') %>

<link rel="stylesheet" href="/css/email.css">

<main>
  <div class="email-list">
    <% emails.forEach((email, idx) => { %>
      <div class="email-card" data-idx="<%= idx %>">
        <h3><%= email.subject %></h3>
        <p><strong>From:</strong> <%= email.fromName %> &lt;<%= email.from %>&gt;</p>
        <button class="open-modal-btn" data-idx="<%= idx %>">Open</button>
        
        <div class="email-details" 
             data-from="<%= email.from %>" 
             data-fromname="<%= email.fromName %>" 
             data-subject="<%= email.subject %>" 
             data-content="<%= email.content %>" 
             style="display:none"></div>
      </div>
    <% }) %>
  </div>

  <a href="/inbox" class="floating-inbox-btn" title="Go to Inbox">
    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
      <path d="M19 3H4.99C3.89 3 3 3.89 3 5v14c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-4zm0 16H5V5h13.17L19 7.83V19zm-7-3c-1.1 0-2-.9-2-2h2v-2H8c0-1.1.9-2 2-2h2V7h2v2h2c0 1.1-.9 2-2 2h-2v2h2c0 1.1-.9 2-2 2h-2z"/>
    </svg>
  </a>

  <%- include('partials/emailopen') %>
</main>

<script src="/js/gsap.min.js"></script>
<script src="/js/inbox.js"></script>
<script src="/js/emailinbox.js"></script>
